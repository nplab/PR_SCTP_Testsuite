<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test-Suite for the SCTP Partial Reliability Extension</title>
	<style type="text/css">
		* {
			padding: 0;
			margin: 0;
		}
		body {
			margin: 10px 100px 10px 20px;
		}
		h1 {
			margin: 20px 0px;
		}
		h2 {
			margin: 15px 10px;
		}
		h3 {
			margin: 12px 15px;
		}
		ul {
			padding: 2em;
   			list-style-type: disc;
   			list-style-position: outside;
   			list-style-image: none;
		}
	
		ol {
			list-style-type: upper-roman; 
			padding: 1em 2em;
		}
	
		#abbreviation_table {
			border-collapse: collapse;
		}

		#abbreviation_table td {
			border: 1px solid black;
			padding: 10px;
		}
	
		.test_case_table {
			width: 75%;
			border-collapse: collapse;
			margin: 20px 20px;
		}
	
		.test_case_table td {
			border: 1px solid black;
			padding: 10px;
		}
			
		.todo {
			color: red;
		}
	</style>
  </head>
  <body>
	<h1>Introduction</h1>
	<p>This is a html document that describes the test suite for the partial reliability extension of sctp.
	   It is current work in progress and later this introduction will be a general description of the 
       designed test suite.
	</p>
	<h2>Abbreviations</h2>
	<table id="abbreviation_table">
		<tbody>
			<tr>
				<td>SCTP</td>
				<td>Stream Control Transmission Protocol</td>
			</tr>
			<tr>
				<td>PR-SCTP</td>
				<td>Partial Reliability Extension for SCTP</td>
			</tr>
			<tr>
				<td>SUT</td>
				<td>System under Test</td>
			</tr>
			<tr>
				<td>IUT</td>
				<td>Implementation under Test</td>
			</tr>
			<tr>
				<td>V</td>
				<td>Valid Behaviour</td>
			</tr>
			<tr>
				<td>I</td>
				<td>Invalid Behaviour</td>
			</tr>
			<tr>
				<td>O</td>
				<td>Inopportune behaviour</td>
			</tr>
			<tr>
				<td>TSN</td>
				<td>Transmission Sequence Number</td>
			</tr>
			<tr>
				<td>cwnd</td>
				<td>Congestion Window Size</td>
			</tr>
		</tbody>
	</table>
	
	<h2>External references</h2>
	This testsuite is based upen the following documents:

	<ul>	
		<li><a id="rfc4960" href="https://tools.ietf.org/html/rfc4960">RFC 4960 (SCTP)</a></li>
		<li><a id="rfc3758" href="https://www.ietf.org/rfc/rfc3758.txt">RFC 3758 (PR-SCTP)</a></li>
		<li><a href="https://www.ietf.org/rfc/rfc6458.txt">RFC 6458 (Sockets API Extensions for SCTP)</a></li>
		<li><a href="https://www.ietf.org/rfc/rfc7496.txt">RFC 7496 (Additional Policies for SCTP)</a></li>
		<li><a href="https://tools.ietf.org/html/draft-ietf-tsvwg-sctp-ndata-05">Internet Draft - Stream Schedulers and User Message Interleaving for SCTP</a></li>
		<li><a href="https://tools.ietf.org/html/draft-tuexen-tsvwg-sctp-multipath-05">Internet Draft - Load Sharing for SCTP</a></li>
	</ul>
	
	<h1>Overview of Test-Suite-Structure</h2>
	<ol>
		<li>Negotiation of Forward-TSN-supported parameter</li>
		<li>Sender Side Implementation</li>
		<li>Receiver Side Implementation</li>
		<li>Additional Policies</li>
		<li>Corner cases and error conditions</li>
	</ol>
	
	<h1>Definition of Test-Suite</h1>
	<h2>Negotiation of Forward-TSN-supported parameter</h2>

	<table class="test_case_table">
	<tbody>
		<tr>
			<td>ID</td>
			<td>handshake-with-forward-tsn-1</td>
		</tr>

		<tr>
			<td>Precondition</td>
			<td> IUT does not support PR-SCTP. 
 				 Association is not established between tester and IUT.
				 Arrange the data at the tester such that an INIT-Chunk with a forward-tsn-supported parameter is sent to the IUT. </td>
		</tr>
	
		<tr>
			<td>Purpose</td>
			<td> Ensure that the IUT responds with an INIT-ACK-chunk where the forward-tsn-supported parameter is listed at the 
                 unrecognized parameters. </td>
		</tr>
	
		<tr>
			<td>References</td>
			<td> <a href="#rfc3758">RFC 3758 [section 3.3.2]</a>, <a href="#rfc4960">RFC 4960 [section 3.3.3.1]</a></td>
		</tr>
	</tbody>
	</table>

	<table class="test_case_table">
	<tbody>
		<tr>
			<td>ID</td>
			<td>handshake-with-forward-tsn-2</td>
		</tr>

		<tr>
			<td>Precondition</td>
			<td> IUT does not support PR-SCTP. 
 				 Association is not established between tester and IUT.
				 Configure the IUT to send an INIT-Chunk to the tester. </td>
		</tr>
	
		<tr>
			<td>Purpose</td>
			<td> Ensure that the received INIT-Chunk from the IUT does not contain the forward-tsn-supported parameter in
				 the optional parameter list. </td>
		</tr>
	
		<tr>
			<td>References</td>
			<td> <a href="#rfc3758">RFC 3758 [section 3.3.2]</a>, <a href="#rfc4960">RFC 4960 [section 3.3.3.1]</a></td>
		</tr>
	</tbody>
	</table>

	<table class="test_case_table">
	<tbody>
		<tr>
			<td>ID</td>
			<td>handshake-with-forward-tsn-3</td>
		</tr>

		<tr>
			<td>Precondition</td>
			<td> IUT does not support PR-SCTP. 
 				 Association is not established between tester and IUT.
				 Configure the IUT to send an INIT-Chunk to the tester.
				 The tester responds with an INIT-ACK where the forward-tsn-supported parameter is set. </td>
		</tr>
	
		<tr>
			<td>Purpose</td>
			<td> Ensure that the IUT upon receipt of an INIT-ACK-chunk with a forward-tsn-supported parameter sends an ERROR-Chunk 
				 with the cause "invalid mandatory parameter". </td>
		</tr>
	
		<tr>
			<td>References</td>
			<td> <a href="#rfc3758">RFC 3758 [section 3.3.2]</a>, <a href="#rfc4960">RFC 4960 [section 3.3.3]</a></td>
		</tr>
	</tbody>
	</table>
	
	<table class="test_case_table">
	<tbody>
		<tr>
			<td>ID</td>
			<td>handshake-with-forward-tsn-4</td>
		</tr>

		<tr>
			<td>Precondition</td>
			<td> Association is established between tester and IUT, where in the INIT-Chunk the forward-tsn-supported parameter is NOT set.
				 Arrange the data at the tester that an FORWARD TSN chunk is sent to the IUT.</td>
		</tr>
	
		<tr>
			<td>Purpose</td>
			<td> Ensure that the IUT upon receipt of an FORWARD TSN chunk at an association where PR-SCTP is not supported sends an ERROR-Chunk 
				 with the cause <span class="todo">"???"</span>. </td>
		</tr>
	
		<tr>
			<td>References</td>
			<td> <a href="#rfc3758">RFC 3758 [section 3.3.2]</a>, <a href="#rfc4960">RFC 4960 [section 3.3.3]</a></td>
		</tr>
	</tbody>
	</table>
	
	<table class="test_case_table">
	<tbody>
		<tr>
			<td>ID</td>
			<td>handshake-with-forward-tsn-5</td>
		</tr>

		<tr>
			<td>Precondition</td>
			<td> Association is established between tester and IUT, where in the INIT-ACK-Chunk the forward-tsn-supported parameter is NOT set.
				 Arrange the data at the tester that an FORWARD TSN chunk is sent to the IUT.</td>
		</tr>
	
		<tr>
			<td>Purpose</td>
			<td> Ensure that the IUT upon receipt of an FORWARD TSN chunk at an association where PR-SCTP is not supported sends an ERROR-Chunk 
				 with the cause <span class="todo">"???"</span>. </td>
		</tr>
	
		<tr>
			<td>References</td>
			<td> <a href="#rfc3758">RFC 3758 [section 3.3.2]</a>, <a href="#rfc4960">RFC 4960 [section 3.3.3]</a></td>
		</tr>
	</tbody>
	</table>
	
	<table class="test_case_table">
	<tbody>
		<tr>
			<td>ID</td>
			<td>handshake-with-forward-tsn-6</td>
		</tr>

		<tr>
			<td>Precondition</td>
			<td> IUT supports PR-SCTP. 
				 Association is established between tester and IUT, where the forward-tsn-supported parameter is set in the INIT-Chunk and the INIT-ACK-Chunk.
			</td>
		</tr>
	
		<tr>
			<td>Purpose</td>
			<td> Ensure that the IUT has enabled PR-SCTP for this association. </td>
		</tr>
	
		<tr>
			<td>References</td>
			<td> <a href="#rfc3758">RFC 3758 [section 3.3.2]</a></td>
		</tr>
	</tbody>
	</table>

	<table class="test_case_table">
	<tbody>
		<tr>
			<td>ID</td>
			<td>handshake-with-forward-tsn-7</td>
		</tr>

		<tr>
			<td>Precondition</td>
			<td> IUT does support PR-SCTP. 
 				 Association is not established between tester and IUT.
				 Arrange the data at the tester such that an INIT-Chunk with a forward-tsn-supported parameter is sent to the IUT. 
				 Dont send an COOKIE-ECHO-Chunk after receival of the INIT-ACK-Chunk from the IUT. Instead retransmit the INIT-Chunk  - but this time without the forward tsn parameter set.
				 After that complete the handshake for this association. 
			</td>
		</tr>
	
		<tr>
			<td>Purpose</td>
			<td> Ensure that the IUT has disabled PR-SCTP for this association. </td>
		</tr>
	
		<tr>
			<td>References</td>
			<td> <span class="todo">Are there some references for these situations in the RFCs?</span></td>
		</tr>
	</tbody>
	</table>
	
	<table class="test_case_table">
	<tbody>
		<tr>
			<td>ID</td>
			<td>TODO</td>
		</tr>

		<tr>
			<td>TODO</td>
			<td> Can test cases from the receipt of operational error for forward tsn supported parameter be extracted?</td>
		</tr>

		<tr>
			<td>References</td>
			<td> <a href="#rfc3758">RFC 3758 [section 3.3.3]</a></td>
		</tr>
	</tbody>
	</table>
	
	<h2>Sender Side Implementation</h2>
	
	<p><strong>Notice:</strong> These test cases use the term "abandoned" like defined in <a href="#rfc3758">RFC 3758 [section 3.4]</a>. 
			   This means that these test cases have to be implemented for each specific policy rule that defines when a data chunk should be considered "abandoned" for the sender. </a> </p>

	<table class="test_case_table">
	<tbody>
		<tr>
			<td>ID</td>
			<td>sender-side-implementation-1</td>
		</tr>

		<tr>
			<td>Precondition</td>
			<td> IUT supports PR-SCTP. 
				 Association where PR-SCTP is enabled is established between tester and IUT.
				 Let the IUT send three not bundled data chunks with the stream identifier 0 and the stream sequence number 1 to the tester. Send an SACK at the tester for the first two data chunks.
				 Then wait so long until the T3-rtx of the sender expires and flags the outstanding DATA-Chunk as abandoned.
			</td>
		</tr>
	
		<tr>
			<td>Purpose</td>
			<td> Ensure that the IUT sends a FORWARD TSN-Chunk where the new cumulative tsn is pointing to the last (third) DATA-Chunk and that the stream identifier is 0 and the stream sequence number is 1. 
				 Also ensure that the sender does not advance the cwnd based on the abandoned chunk.</td>
		</tr>

		<tr>
			<td>References</td>
			<td> <a href="#rfc3758">RFC 3758 [section 3.5 - A2, C3 and C4]</a></td>
		</tr>
	</tbody>
	</table>

	<table class="test_case_table">
	<tbody>
		<tr>
			<td>ID</td>
			<td>sender-side-implementation-2</td>
		</tr>

		<tr>
			<td>Precondition</td>
			<td> IUT supports PR-SCTP. 
				 Association where PR-SCTP is enabled is established between tester and IUT.
				 Let the IUT send three not bundled unordered data chunks to the tester. Send an SACK at the tester for the first two data chunks.
				 Then wait so long until the T3-rtx of the sender expires and flags the outstanding DATA-Chunk as abandoned.
			</td>
		</tr>
	
		<tr>
			<td>Purpose</td>
			<td> Ensure that the IUT sends a FORWARD TSN-Chunk where the new cumulative tsn is pointing to the last (third) DATA-Chunk and that the stream identifier and the stream sequence number are not set in the FORWARD TSN. 
				 Also ensure that the sender does not advance the cwnd based on the abandoned chunk. </td>
		</tr>

		<tr>
			<td>References</td>
			<td> <a href="#rfc3758">RFC 3758 [section 3.5 - A2, C3 and C4]</a></td>
		</tr>
	</tbody>
	</table>

	<table class="test_case_table">
	<tbody>
		<tr>
			<td>ID</td>
			<td>sender-side-implementation-3</td>
		</tr>

		<tr>
			<td>Precondition</td>
			<td> IUT supports PR-SCTP. 
				 Association where PR-SCTP is enabled is established between tester and IUT.
				 Let the IUT send three not bundled unordered and fragmented data chunks to the tester. Send an SACK at the tester for the first two data chunks.
				 Then wait so long until the T3-rtx of the sender expires and flags the outstanding DATA-Chunk as abandoned.
			</td>
		</tr>
	
		<tr>
			<td>Purpose</td>
			<td> Ensure that the IUT sends a valid FORWARD TSN-Chunk and abandons all fragmented chunks at the the same time. </td>
		</tr>

		<tr>
			<td>References</td>
			<td> <a href="#rfc3758">RFC 3758 [section 3.5 - A3]</a></td>
		</tr>
	</tbody>
	</table>
	
	<table class="test_case_table">
	<tbody>
		<tr>
			<td>ID</td>
			<td>sender-side-implementation-4</td>
		</tr>

		<tr>
			<td>Precondition</td>
			<td> IUT supports PR-SCTP. 
				 Association where PR-SCTP is enabled is established between tester and IUT. Let the MTU of the association be 1000 bytes.
				 Let the IUT send 4000 bytes of data to the tester. Send a SACK for the first two DATA-Chunks at the tester. 
				 Then wait so long until the T3-rtx of the sender expires and flags the third DATA-Chunk as abandoned.
			</td>
		</tr>
	
		<tr>
			<td>Purpose</td>
			<td> Ensure that the IUT sends a valid FORWARD TSN-Chunk and bundles it with the fourth DATA-Chunk.  </td>
		</tr>

		<tr>
			<td>References</td>
			<td> <a href="#rfc3758">RFC 3758 [section 3.5 - F2]</a></td>
		</tr>
	</tbody>
	</table>

	<table class="test_case_table">
	<tbody>
		<tr>
			<td>ID</td>
			<td>sender-side-implementation-5</td>
		</tr>

		<tr>
			<td>Precondition</td>
			<td> IUT supports PR-SCTP. 
				 Association where PR-SCTP is enabled is established between tester and IUT. Let the MTU of the association be 1000 bytes.
				 Let the IUT send 3000 bytes of data to the tester. Send a SACK for the first two DATA-Chunks at the tester. 
				 Then wait so long until the T3-rtx of the sender expires and flags the third DATA-Chunk as abandoned.
			</td>
		</tr>
	
		<tr>
			<td>Purpose</td>
			<td> Ensure that the IUT sends a valid FORWARD TSN-Chunk and does not delay the sending of the forward tsn to more than 500ms.  </td>
		</tr>

		<tr>
			<td>References</td>
			<td> <a href="#rfc3758">RFC 3758 [section 3.5 - F3]</a></td>
		</tr>
	</tbody>
	</table>

	
	
	
  </body>
</html>
